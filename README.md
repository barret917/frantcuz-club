# üé≠ Frantsuz Club - –†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å

> –í–µ–±-—Å–∞–π—Ç –∏ —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞ "–§—Ä–∞–Ω—Ü—É–∑" –≤ –ú–æ—Å–∫–≤–µ

[![–î–æ–º–µ–Ω](https://img.shields.io/badge/–î–æ–º–µ–Ω-frantsuz--club.ru-blue)](https://frantsuz-club.ru)
[![Docker](https://img.shields.io/badge/Docker-Ready-green)](https://www.docker.com/)

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ –î–õ–Ø –î–ï–ü–õ–û–Ø

**–ì–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é –Ω–∞ VDS?** –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:

### üìÑ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è:

1. **[DEPLOYMENT_READY.md](./DEPLOYMENT_READY.md)** ‚≠ê - **–ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞!** –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç –∏ –≤—Å–µ —Ñ–∞–π–ª—ã
2. **[DEPLOY_QUICK.md](./DEPLOY_QUICK.md)** - –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ (–∫—Ä–∞—Ç–∫–æ)
3. **[DEPLOY_CHEATSHEET.txt](./DEPLOY_CHEATSHEET.txt)** - –ü–∞–º—è—Ç–∫–∞ –≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ
4. **[DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)** - –ü–æ–ª–Ω–∞—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### ‚ö° –ö—Ä–∞—Ç–∫–æ: 3 —ç—Ç–∞–ø–∞

```bash
# –≠–¢–ê–ü 1: HTTP
1. –°–æ–∑–¥–∞–π—Ç–µ .env.production
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: http://frantsuz-club.ru ‚úÖ

# –≠–¢–ê–ü 2: SSL
sudo ./scripts/setup-ssl.sh

# –≠–¢–ê–ü 3: HTTPS
1. –û–±–Ω–æ–≤–∏—Ç–µ CORS
2. –ó–∞–º–µ–Ω–∏—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: https://frantsuz-club.ru üîí‚úÖ
```

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤—ã—à–µ!** ‚òùÔ∏è

---

## üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

- üé± **–ë–∏–ª—å—è—Ä–¥** - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–æ–≤, —à–∫–æ–ª–∞ –±–∏–ª—å—è—Ä–¥–∞
- üé§ **–ö–∞—Ä–∞–æ–∫–µ** - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ª–æ–≤, —à–∫–æ–ª–∞ –≤–æ–∫–∞–ª–∞
- üéÆ **PlayStation** - –∏–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞
- üç∏ **–ë–∞—Ä & –ö–∞—Ñ–µ** - –º–µ–Ω—é, –∑–∞–∫–∞–∑—ã
- üéâ **–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è** - –∞—Ñ–∏—à–∞, –ø—Ä–æ–¥–∞–∂–∞ –±–∏–ª–µ—Ç–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –º–µ—Å—Ç
- üí≥ **–û–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç–∞** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PayKeeper
- üìß **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ –ø–æ—á—Ç—É —Å QR-–∫–æ–¥–∞–º–∏
- ü§ñ **Telegram –±–æ—Ç** - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (polling mode)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
frantsuz-club/
‚îú‚îÄ‚îÄ backend/          # Node.js + Express + Prisma + TypeScript
‚îú‚îÄ‚îÄ frontend/         # React + TypeScript + Vite
‚îú‚îÄ‚îÄ frantsuz_bot/     # Telegram Bot (Node.js)
‚îú‚îÄ‚îÄ nginx/            # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (HTTP & HTTPS)
‚îî‚îÄ‚îÄ scripts/          # –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è –∏ SSL
```

### Tech Stack

- **Backend:** Node.js 18, Express, Prisma ORM, PostgreSQL 16, TypeScript
- **Frontend:** React 18, TypeScript, Vite, Styled Components
- **Database:** PostgreSQL 16 (–≤ Docker)
- **Deployment:** Docker, Docker Compose, Nginx
- **SSL:** Let's Encrypt (Certbot, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- **Bot:** Telegram Bot API (polling mode)

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ—è

```
Internet ‚Üí Nginx (80, 443) ‚Üí Docker Network (frantsuz_network)
                                ‚îú‚îÄ Frontend (3006:80)
                                ‚îú‚îÄ Backend (3007:3002)
                                ‚îú‚îÄ PostgreSQL (internal only)
                                ‚îî‚îÄ Telegram Bot (internal only)
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- ‚úÖ **Frontend & Backend:** –î–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Nginx proxy (–ø–æ—Ä—Ç—ã 3006, 3007)
- ‚úÖ **PostgreSQL:** –ù–ï –¥–æ—Å—Ç—É–ø–Ω–∞ —Å–Ω–∞—Ä—É–∂–∏ (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏)
- ‚úÖ **Telegram Bot:** –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏ (polling mode, –≤–Ω—É—Ç—Ä–∏ Docker)
- ‚úÖ **SSL:** Let's Encrypt —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

---

## üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- PostgreSQL 16+
- npm

### –ó–∞–ø—É—Å–∫

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd backend && npm install
cd ../frontend && npm install
cd ../frantsuz_bot && npm install

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cd backend
cp env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ DATABASE_URL –∏ –¥—Ä—É–≥–∏–µ

# 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
npx prisma migrate dev
npx prisma db seed

# 4. –ó–∞–ø—É—Å–∫
# Backend (–≤ –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd backend && npm run dev

# Frontend (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd frontend && npm run dev

# Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –≤ —Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd frantsuz_bot && npm start
```

**URL:**
- Frontend: http://localhost:3003
- Backend API: http://localhost:3002

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–µ–ø–ª–æ–π –∏ Production
- **[DEPLOYMENT_READY.md](./DEPLOYMENT_READY.md)** - –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç (–Ω–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å!)
- **[DEPLOY_QUICK.md](./DEPLOY_QUICK.md)** - –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
- **[DEPLOY_CHEATSHEET.txt](./DEPLOY_CHEATSHEET.txt)** - –ü–∞–º—è—Ç–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ
- **[DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)** - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **[README_DEPLOYMENT.md](./README_DEPLOYMENT.md)** - –û–±—â–∏–π –æ–±–∑–æ—Ä

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[BOT_ENV_SETUP.md](./BOT_ENV_SETUP.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞
- **[BOT_API_INTEGRATION.md](./BOT_API_INTEGRATION.md)** - API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–æ—Ç–∞
- **[PAYKEEPER_SETUP.md](./PAYKEEPER_SETUP.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PayKeeper

### –°—Ç–∞—Ä—ã–µ –≥–∞–π–¥—ã (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
- `VDS_DEPLOYMENT_GUIDE.md`
- `SERVER_DEPLOYMENT_INSTRUCTIONS.md`
- `HTTPS_MIGRATION_GUIDE.md`
- `DEPLOYMENT_CHECKLIST.md`

---

## ü§ñ Telegram Bot

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ **polling** (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç webhook).

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –º–µ—Å—Ç
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –±–∏–ª–µ—Ç–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ QR-–∫–æ–¥–æ–≤
- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã —Å–∞–π—Ç–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
–°–º. [BOT_ENV_SETUP.md](./BOT_ENV_SETUP.md)

---

## üìß Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –±–∏–ª–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç:
- –î–µ—Ç–∞–ª–∏ –±–∏–ª–µ—Ç–∞
- QR-–∫–æ–¥ (–≤–ª–æ–∂–µ–Ω–∏–µ)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP –≤ `.env.production`.

---

## üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PayKeeper

–û–Ω–ª–∞–π–Ω-–ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ PayKeeper.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `.env.production`:
```env
PAYKEEPER_SERVER=https://your-paykeeper.ru
PAYKEEPER_USER=your_user
PAYKEEPER_PASSWORD=your_password
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ HTTPS (Let's Encrypt)
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ–¥ –¥–æ–º–µ–Ω
- ‚úÖ JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ Firewall (ufw)
- ‚úÖ PostgreSQL —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
- ‚úÖ Backend API –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Nginx proxy
- ‚úÖ Security headers –≤ Nginx
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ Docker networks

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (Production)

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose -f docker-compose.production.yml ps

# –õ–æ–≥–∏
docker-compose -f docker-compose.production.yml logs -f
docker-compose -f docker-compose.production.yml logs -f backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose -f docker-compose.production.yml restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.production.yml down

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl https://frantsuz-club.ru/health

# Nginx –ª–æ–≥–∏
sudo tail -f /var/log/nginx/frantsuz-club-error.log

# SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
sudo certbot certificates
sudo certbot renew

# –ë—ç–∫–∞–ø –ë–î
docker-compose -f docker-compose.production.yml exec postgres \
  pg_dump -U postgres frantsuz_club > backup.sql
```

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ API endpoints

```
# –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
GET    /api/events              # –°–ø–∏—Å–æ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
GET    /api/events/:id          # –î–µ—Ç–∞–ª–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
POST   /api/events              # –°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (admin)

# –ë–∏–ª–µ—Ç—ã
GET    /api/events/:id/zones    # –ó–æ–Ω—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
POST   /api/tickets/purchase    # –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç
GET    /api/tickets/:id         # –î–µ—Ç–∞–ª–∏ –±–∏–ª–µ—Ç–∞

# –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
GET    /api/bookings            # –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–µ–π
POST   /api/bookings            # –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω—å

# Telegram Bot API
GET    /api/bot/events          # –°–æ–±—ã—Ç–∏—è (–¥–ª—è –±–æ—Ç–∞)
POST   /api/bot/tickets         # –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤ (–¥–ª—è –±–æ—Ç–∞)
GET    /api/bot/tickets/user/:telegramUserId  # –ë–∏–ª–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

---

## üö® Troubleshooting

### "Cannot connect to Docker daemon"
```bash
sudo systemctl start docker
sudo usermod -aG docker $USER
```

### "Port already in use"
```bash
sudo netstat -tlnp | grep -E ':(3006|3007)'
docker ps
docker stop <container_id>
```

### "SSL certificate error"
```bash
dig frantsuz-club.ru
sudo certbot renew
sudo systemctl reload nginx
```

### "Backend not responding"
```bash
docker-compose -f docker-compose.production.yml logs backend
docker-compose -f docker-compose.production.yml restart backend
```

–ë–æ–ª—å—à–µ –≤ [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–°–∞–π—Ç:** [frantsuz-club.ru](https://frantsuz-club.ru)
- **–ê–¥—Ä–µ—Å:** –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –°–∞–ª—Ç—ã–∫–æ–≤—Å–∫–∞—è, 49–ê
- **–¢–µ–ª–µ—Ñ–æ–Ω:** +7(968) 090-55-50
- **Email:** order@wetop.ru

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

¬© 2025 Frantsuz Club. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

–°–¥–µ–ª–∞–Ω–æ [WeTop digital agency](https://wetop.ru).

---

**üéâ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!**

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ **[DEPLOYMENT_READY.md](./DEPLOYMENT_READY.md)** üöÄ

