═══════════════════════════════════════════════════════════════════════
   🚀 FRANTSUZ CLUB - ДЕПЛОЙ НА frantsuz-club.ru
═══════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────┐
│  📦 ЭТАП 1: ПОДГОТОВКА (на локальном компьютере)                    │
└─────────────────────────────────────────────────────────────────────┘

  1️⃣  Создайте .env.production:
      
      cp production.env.template .env.production
      nano .env.production
      
      ⚠️  Обязательно заполните:
      • DB_PASSWORD
      • JWT_SECRET
      • TELEGRAM_BOT_TOKEN
      • PAYKEEPER_* (если есть)
      • SMTP_* (если нужна email рассылка)

  2️⃣  Создайте архив:
      
      tar -czf frantsuz-club.tar.gz \
        --exclude='node_modules' --exclude='.git' \
        --exclude='dist' --exclude='backend/uploads' .

  3️⃣  Загрузите на сервер:
      
      scp frantsuz-club.tar.gz root@185.60.134.145:/root/
      scp .env.production root@185.60.134.145:/root/

┌─────────────────────────────────────────────────────────────────────┐
│  🖥️  ЭТАП 2: HTTP (на сервере SSH)                                  │
└─────────────────────────────────────────────────────────────────────┘

  4️⃣  Распакуйте:
      
      ssh root@185.60.134.145
      cd /root
      tar -xzf frantsuz-club.tar.gz
      mv .env.production frantsuz-club/
      cd frantsuz-club

  5️⃣  Запустите Docker:
      
      docker-compose -f docker-compose.production.yml \
        --env-file .env.production up -d --build
      
      ⏳ Ждите 2-3 минуты...
      
      docker-compose -f docker-compose.production.yml ps
      curl http://localhost:3006
      curl http://localhost:3007/health

  6️⃣  Настройте Nginx:
      
      sudo cp nginx/frantsuz-club.http.conf \
        /etc/nginx/sites-available/frantsuz-club.conf
      sudo ln -s /etc/nginx/sites-available/frantsuz-club.conf \
        /etc/nginx/sites-enabled/
      sudo nginx -t
      sudo systemctl reload nginx
      
      sudo ufw allow 80/tcp
      sudo ufw allow 443/tcp

  7️⃣  Проверьте:
      
      🌐 http://frantsuz-club.ru
      
      ✅ Если работает - переходим к SSL!

┌─────────────────────────────────────────────────────────────────────┐
│  🔒 ЭТАП 3: SSL (Let's Encrypt)                                      │
└─────────────────────────────────────────────────────────────────────┘

  8️⃣  Запустите скрипт:
      
      sudo ./scripts/setup-ssl.sh
      
      ✨ Скрипт сам всё сделает!

┌─────────────────────────────────────────────────────────────────────┐
│  🌐 ЭТАП 4: HTTPS                                                    │
└─────────────────────────────────────────────────────────────────────┘

  9️⃣  Обновите CORS:
      
      nano .env.production
      # Измените:
      CORS_ORIGIN=https://frantsuz-club.ru,https://www.frantsuz-club.ru
      
      docker-compose -f docker-compose.production.yml \
        --env-file .env.production restart backend frontend

  🔟  Замените Nginx конфиг:
      
      sudo rm /etc/nginx/sites-enabled/frantsuz-club.conf
      sudo cp nginx/frantsuz-club.https.conf \
        /etc/nginx/sites-available/frantsuz-club.conf
      sudo ln -s /etc/nginx/sites-available/frantsuz-club.conf \
        /etc/nginx/sites-enabled/
      sudo nginx -t
      sudo systemctl reload nginx

  1️⃣1️⃣  Проверьте:
      
      🌐 https://frantsuz-club.ru
      
      🔒 Должен быть зелёный замок!

═══════════════════════════════════════════════════════════════════════
   ✅ ГОТОВО! Сайт работает на https://frantsuz-club.ru
═══════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────┐
│  🔧 ПОЛЕЗНЫЕ КОМАНДЫ                                                 │
└─────────────────────────────────────────────────────────────────────┘

  Логи:
    docker-compose -f docker-compose.production.yml logs -f
    docker-compose -f docker-compose.production.yml logs -f backend
    sudo tail -f /var/log/nginx/frantsuz-club-error.log

  Перезапуск:
    docker-compose -f docker-compose.production.yml restart

  Остановка:
    docker-compose -f docker-compose.production.yml down

  Проверка:
    curl https://frantsuz-club.ru/health
    sudo certbot certificates

┌─────────────────────────────────────────────────────────────────────┐
│  📚 ДОКУМЕНТАЦИЯ                                                     │
└─────────────────────────────────────────────────────────────────────┘

  • DEPLOYMENT_READY.md   - Итоговый чек-лист
  • DEPLOY_QUICK.md       - Быстрая шпаргалка
  • DEPLOYMENT_GUIDE.md   - Полная инструкция
  • README_DEPLOYMENT.md  - Общая информация
  • BOT_ENV_SETUP.md      - Настройка бота

═══════════════════════════════════════════════════════════════════════

  📞 КОНТАКТЫ
  
  Сайт:   https://frantsuz-club.ru
  Адрес:  г. Москва, ул. Салтыковская, 49А
  Тел:    +7(968) 090-55-50
  Email:  order@wetop.ru

═══════════════════════════════════════════════════════════════════════

